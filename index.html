<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Mouse Particle Magic</title>
<style>
html, body {
  margin:0;
  padding:0;
  overflow:hidden;
  height:100%;
  background:#111;
  cursor:none;
}
canvas {
  display:block;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

let mouse = { x: width/2, y: height/2 };
const particles = [];
const particleCount = 300;

class Particle {
    constructor(){
        this.x = Math.random()*width;
        this.y = Math.random()*height;
        this.size = Math.random()*2+1;
        this.speedX = 0;
        this.speedY = 0;
        this.color = `hsl(${Math.random()*360}, 80%, 60%)`;
    }
    update(){
        // Drag mot musen
        let dx = mouse.x - this.x;
        let dy = mouse.y - this.y;
        let dist = Math.sqrt(dx*dx + dy*dy);
        let force = Math.min(dist/100,0.5);

        this.speedX += dx*0.001*force;
        this.speedY += dy*0.001*force;

        // Lägg till lite slump
        this.speedX += (Math.random()-0.5)*0.1;
        this.speedY += (Math.random()-0.5)*0.1;

        // Dämpa hastighet
        this.speedX *= 0.95;
        this.speedY *= 0.95;

        this.x += this.speedX;
        this.y += this.speedY;

        // Wrap around
        if(this.x<0) this.x=width;
        if(this.x>width) this.x=0;
        if(this.y<0) this.y=height;
        if(this.y>height) this.y=0;
    }
    draw(){
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fillStyle = this.color;
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 10;
        ctx.fill();
    }
}

function init(){
    for(let i=0;i<particleCount;i++){
        particles.push(new Particle());
    }
}

function animate(){
    ctx.fillStyle = 'rgba(17,17,17,0.3)';
    ctx.fillRect(0,0,width,height);
    particles.forEach(p=>{
        p.update();
        p.draw();
    });
    requestAnimationFrame(animate);
}

window.addEventListener('resize',()=>{
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
});

window.addEventListener('mousemove',(e)=>{
    mouse.x = e.clientX;
    mouse.y = e.clientY;
});

// init
init();
animate();
</script>

</body>
</html>
