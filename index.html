<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Space Sandbox</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  color:white;
  font-family:system-ui, sans-serif;
}
canvas{display:block;}

#menu{
  position:fixed;
  top:20px;
  right:20px;
  background:rgba(0,0,0,0.6);
  border:1px solid rgba(255,255,255,0.2);
  padding:12px;
  border-radius:10px;
}
#menu button{
  display:block;
  width:140px;
  margin:6px 0;
  background:#111;
  color:white;
  border:1px solid #333;
  padding:8px;
  cursor:pointer;
}
#menu button.active{
  border-color:white;
}
</style>
</head>
<body>

<canvas id="c"></canvas>

<div id="menu">
  <button data-type="blackhole">üï≥ Black Hole</button>
  <button data-type="planet">ü™ê Planet</button>
</div>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");
c.width = innerWidth;
c.height = innerHeight;

let mode = null;
const objects = [];
const stars = [];

class Star{
  constructor(){
    this.x = Math.random()*c.width;
    this.y = Math.random()*c.height;
    this.vx = 0;
    this.vy = 0;
    this.size = Math.random()*1.5+0.3;
  }
  update(){
    objects.forEach(o=>{
      let dx = o.x-this.x;
      let dy = o.y-this.y;
      let d = Math.sqrt(dx*dx+dy*dy)+0.1;
      let force = o.type==="blackhole" ? 80/d : 20/d;
      this.vx += dx/d * force * o.strength;
      this.vy += dy/d * force * o.strength;
    });

    this.vx *= 0.99;
    this.vy *= 0.99;
    this.x += this.vx;
    this.y += this.vy;

    if(this.x<0) this.x=c.width;
    if(this.x>c.width) this.x=0;
    if(this.y<0) this.y=c.height;
    if(this.y>c.height) this.y=0;
  }
  draw(){
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
    ctx.fillStyle="white";
    ctx.fill();
  }
}

class SpaceObject{
  constructor(x,y,type){
    this.x=x;
    this.y=y;
    this.type=type;
    this.strength = type==="blackhole" ? 0.02 : 0.01;
  }
  draw(){
    if(this.type==="blackhole"){
      let g = ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,40);
      g.addColorStop(0,"#000");
      g.addColorStop(1,"rgba(255,255,255,0.2)");
      ctx.fillStyle=g;
      ctx.beginPath();
      ctx.arc(this.x,this.y,40,0,Math.PI*2);
      ctx.fill();
    } else {
      ctx.beginPath();
      ctx.arc(this.x,this.y,20,0,Math.PI*2);
      ctx.fillStyle="#3fa9f5";
      ctx.fill();
    }
  }
}

// rocket
let rocketX = -100;
function drawRocket(){
  rocketX += 2;
  if(rocketX > c.width+100) rocketX = -200;
  ctx.fillStyle="white";
  ctx.fillRect(rocketX,100,40,6);
}

// init stars
for(let i=0;i<1200;i++) stars.push(new Star());

document.querySelectorAll("#menu button").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll("#menu button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    mode = b.dataset.type;
  };
});

addEventListener("click",e=>{
  if(!mode) return;
  if(e.clientX > c.width-200) return;
  objects.push(new SpaceObject(e.clientX,e.clientY,mode));
});

addEventListener("resize",()=>{
  c.width = innerWidth;
  c.height = innerHeight;
});

function loop(){
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,c.width,c.height);

  stars.forEach(s=>{
    s.update();
    s.draw();
  });

  objects.forEach(o=>o.draw());
  drawRocket();

  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
