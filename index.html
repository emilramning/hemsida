<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>•</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  cursor:none;
}
canvas{display:block;}
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");

function resize(){
  c.width = innerWidth;
  c.height = innerHeight;
}
resize();

let mouse = { x: c.width/2, y: c.height/2 };
const particles = [];
const COUNT = 2500;
const FIELD_RADIUS = 120;

class Particle{
  constructor(){
    this.x = Math.random()*c.width;
    this.y = Math.random()*c.height;
    this.vx = 0;
    this.vy = 0;
    this.size = Math.random()*1.3 + 0.3;
  }

  update(){
    let dx = mouse.x - this.x;
    let dy = mouse.y - this.y;
    let dist = Math.sqrt(dx*dx + dy*dy) + 0.001;

    if(dist < FIELD_RADIUS){
      // mjukt gravitationsfält + rotation
      let strength = (1 - dist / FIELD_RADIUS) * 0.8;

      // dra in
      this.vx += (dx / dist) * strength;
      this.vy += (dy / dist) * strength;

      // cirkulär rörelse
      this.vx += (-dy / dist) * strength * 0.6;
      this.vy += ( dx / dist) * strength * 0.6;
    }

    this.vx *= 0.97;
    this.vy *= 0.97;

    this.x += this.vx;
    this.y += this.vy;

    // wrap
    if(this.x < 0) this.x = c.width;
    if(this.x > c.width) this.x = 0;
    if(this.y < 0) this.y = c.height;
    if(this.y > c.height) this.y = 0;
  }

  draw(){
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
    ctx.fillStyle = "rgba(255,255,255,0.6)";
    ctx.fill();
  }
}

for(let i=0;i<COUNT;i++) particles.push(new Particle());

addEventListener("mousemove", e=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

addEventListener("resize", resize);

function drawField(){
  // subtil aura runt musen
  const g = ctx.createRadialGradient(
    mouse.x, mouse.y, 0,
    mouse.x, mouse.y, FIELD_RADIUS
  );
  g.addColorStop(0,"rgba(255,255,255,0.08)");
  g.addColorStop(1,"rgba(255,255,255,0)");

  ctx.fillStyle = g;
  ctx.beginPath();
  ctx.arc(mouse.x, mouse.y, FIELD_RADIUS, 0, Math.PI*2);
  ctx.fill();
}

function loop(){
  ctx.fillStyle = "rgba(0,0,0,0.18)";
  ctx.fillRect(0,0,c.width,c.height);

  drawField();

  particles.forEach(p=>{
    p.update();
    p.draw();
  });

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
