<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Rainbow Smoke</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  cursor:none;
}
canvas{display:block;}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let lastX = canvas.width/2;
let lastY = canvas.height/2;
let hue = 0;

function draw(x,y){
  const dx = x - lastX;
  const dy = y - lastY;
  const dist = Math.sqrt(dx*dx + dy*dy);

  ctx.lineWidth = dist*0.5 + 5;
  ctx.lineCap = "round";
  ctx.strokeStyle = `hsla(${hue},100%,60%,0.25)`;
  ctx.shadowBlur = 30;
  ctx.shadowColor = `hsla(${hue},100%,60%,0.8)`;

  ctx.beginPath();
  ctx.moveTo(lastX,lastY);
  ctx.lineTo(x,y);
  ctx.stroke();

  lastX = x;
  lastY = y;
  hue += 2;
}

function fade(){
  ctx.fillStyle = "rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  requestAnimationFrame(fade);
}

addEventListener("mousemove",e=>{
  draw(e.clientX,e.clientY);
});

addEventListener("resize",()=>{
  canvas.width = innerWidth;
  canvas.height = innerHeight;
});

fade();
</script>

</body>
</html>
