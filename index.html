<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Learning</title>
<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  cursor:none;
}
canvas{display:block;}
</style>
</head>
<body>

<canvas id="c"></canvas>

<script>
const c = document.getElementById("c");
const ctx = c.getContext("2d");
c.width = innerWidth;
c.height = innerHeight;

let mouse = {x:c.width/2,y:c.height/2};
let ghost = {x:mouse.x,y:mouse.y};
let memory = [];
let phase = 0;
let t0 = Date.now();

addEventListener("mousemove",e=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;
  memory.push({x:e.clientX,y:e.clientY});
  if(memory.length > 200) memory.shift();
});

function update(){
  const t = (Date.now()-t0)/1000;

  if(t>10) phase = 1;
  if(t>30) phase = 2;
  if(t>60) phase = 3;

  // AI-ish prediction
  if(phase>=2 && memory.length>10){
    let a = memory[memory.length-1];
    let b = memory[memory.length-10];
    ghost.x += (a.x + (a.x-b.x)*2 - ghost.x)*0.05;
    ghost.y += (a.y + (a.y-b.y)*2 - ghost.y)*0.05;
  } else {
    ghost.x += (mouse.x-ghost.x)*0.1;
    ghost.y += (mouse.y-ghost.y)*0.1;
  }

  ctx.fillStyle = "rgba(0,0,0,0.08)";
  ctx.fillRect(0,0,c.width,c.height);

  ctx.beginPath();
  ctx.arc(ghost.x,ghost.y,40,0,Math.PI*2);
  ctx.fillStyle = phase<3
    ? "rgba(255,255,255,0.15)"
    : "rgba(255,50,50,0.2)";
  ctx.shadowBlur = 60;
  ctx.shadowColor = phase<3 ? "#fff" : "#f00";
  ctx.fill();

  requestAnimationFrame(update);
}

addEventListener("resize",()=>{
  c.width = innerWidth;
  c.height = innerHeight;
});

update();
</script>

</body>
</html>
